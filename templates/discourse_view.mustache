{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template discourse/discourse_view

    Example context (json):
    {
        "comment": "Example comment for the context"
    }
}}

{{#js}}
{{/js}}

<div class="discourse-view">
    <div class="table-responsive discourse-table-phases">
        <table class="table table-striped table-hover generaltable generalbox">
            <thead>

                <th scope="col" class="{{#activephaseone}}discourse-border-success{{/activephaseone}}{{^activephaseone}}discourse-border-default{{/activephaseone}}">
                    {{#str}}phaseone, mod_discourse{{/str}}
                    {{#activephaseone}}<i class="fa fa-lg fa-check text-success pull-right" title="{{#str}}activephase, mod_discourse{{/str}}"></i>{{/activephaseone}}
                    {{^activephaseone}}{{#canswitchphase}}<a href="view.php?id={{cmid}}&newphase=1"><i class="fa fa-lg fa-toggle-off pull-right" title="{{#str}}switchto, mod_discourse{{/str}} {{#str}}phaseone, mod_discourse{{/str}}"></i></a>{{/canswitchphase}}{{/activephaseone}}
                </th>
                <th scope="col" class="{{#activephasetwo}}discourse-border-success{{/activephasetwo}}{{^activephasetwo}}discourse-border-default{{/activephasetwo}}">
                    {{#str}}phasetwo, mod_discourse{{/str}}
                    {{#activephasetwo}}<i class="fa fa-lg fa-check text-success pull-right" title="{{#str}}activephase, mod_discourse{{/str}}"></i>{{/activephasetwo}}
                    {{^activephasetwo}}{{#canswitchphase}}<a href="view.php?id={{cmid}}&newphase=2"><i class="fa fa-lg fa-toggle-off pull-right" title="{{#str}}switchto, mod_discourse{{/str}} {{#str}}phasetwo, mod_discourse{{/str}}"></i></a>{{/canswitchphase}}{{/activephasetwo}}
                </th>
                <th scope="col" class="{{#activephasethree}}discourse-border-success{{/activephasethree}}{{^activephasethree}}discourse-border-default{{/activephasethree}}">
                    {{#str}}phasethree, mod_discourse{{/str}}
                    {{#activephasethree}}<i class="fa fa-lg fa-check text-success pull-right" title="{{#str}}activephase, mod_discourse{{/str}}"></i>{{/activephasethree}}
                    {{^activephasethree}}{{#canswitchphase}}<a href="view.php?id={{cmid}}&newphase=3"><i class="fa fa-lg fa-toggle-off pull-right" title="{{#str}}switchto, mod_discourse{{/str}} {{#str}}phasethree, mod_discourse{{/str}}"></i></a>{{/canswitchphase}}{{/activephasethree}}
                </th>
                <th scope="col" class="{{#activephasefour}}discourse-border-success{{/activephasefour}}{{^activephasefour}}discourse-border-default{{/activephasefour}}">
                    {{#str}}phasefour, mod_discourse{{/str}}
                    {{#activephasefour}}<i class="fa fa-lg fa-check text-success pull-right" title="{{#str}}activephase, mod_discourse{{/str}}"></i>{{/activephasefour}}
                    {{^activephasefour}}{{#canswitchphase}}<a href="view.php?id={{cmid}}&newphase=4"><i class="fa fa-lg fa-toggle-off pull-right" title="{{#str}}switchto, mod_discourse{{/str}} {{#str}}phasefour, mod_discourse{{/str}}"></i></a>{{/canswitchphase}}{{/activephasefour}}
                </th>
            </thead>
            <tbody>
                <tr>
                    <td class="{{#activephaseone}}discourse-border-success{{/activephaseone}}{{^activephaseone}}discourse-border-default{{/activephaseone}}">
                        {{#deadlinephaseone}}
                            {{#activephaseone}} <strong> {{#str}}activesince, mod_discourse{{/str}}:</strong> {{/activephaseone}}
                            {{^activephaseone}} <strong> {{#str}}activefrom, mod_discourse{{/str}}:</strong> {{/activephaseone}}

                            <span class="pull-right">{{#userdate}}{{deadlinephaseone}}, {{#str}} strftimedate {{/str}}{{/userdate}}</span>
                            <br><br>
                        {{/deadlinephaseone}}
                        {{#hintphaseone}}
                            <strong> {{#str}}hint, mod_discourse{{/str}}: </strong>
                            <span class="pull-right"><p> {{#shortentext}} 210, {{hintphaseone}} {{/shortentext}}</p></span>
                        {{/hintphaseone}}
                    </td>
                    <td class="{{#activephasetwo}}discourse-border-success{{/activephasetwo}}{{^activephasetwo}}discourse-border-default{{/activephasetwo}}">
                        {{#deadlinephasetwo}}
                            {{#activephasetwo}} <strong> {{#str}}activesince, mod_discourse{{/str}}:</strong> {{/activephasetwo}}
                            {{^activephasetwo}} <strong> {{#str}}activefrom, mod_discourse{{/str}}:</strong> {{/activephasetwo}}

                            <span class="pull-right">{{#userdate}}{{deadlinephasetwo}}, {{#str}} strftimedate {{/str}}{{/userdate}}</span>
                            <br><br>
                        {{/deadlinephasetwo}}
                        {{#hintphasetwo}}<strong> {{#str}}hint, mod_discourse{{/str}}: </strong><span class="pull-right"><p> {{#shortentext}} 210, {{hintphasetwo}} {{/shortentext}}</p>{{/hintphasetwo}} </span>
                    </td>
                    <td class="{{#activephasethree}}discourse-border-success{{/activephasethree}}{{^activephasethree}}discourse-border-default{{/activephasethree}}">
                        {{#deadlinephasethree}}
                            {{#activephasethree}} <strong> {{#str}}activesince, mod_discourse{{/str}}:</strong> {{/activephasethree}}
                            {{^activephasethree}} <strong> {{#str}}activefrom, mod_discourse{{/str}}:</strong> {{/activephasethree}}

                            <span class="pull-right">{{#userdate}}{{deadlinephasethree}}, {{#str}} strftimedate {{/str}}{{/userdate}}</span>
                            <br><br>
                        {{/deadlinephasethree}}
                        {{#hintphasethree}}<strong> {{#str}}hint, mod_discourse{{/str}}: </strong><span class="pull-right"><p> {{#shortentext}} 210, {{hintphasethree}} {{/shortentext}}</p>{{/hintphasethree}} </span>
                     </td>
                    <td class="{{#activephasefour}}discourse-border-success{{/activephasefour}}{{^activephasefour}}discourse-border-default{{/activephasefour}}">
                        {{#deadlinephasefour}}
                            {{#activephasefour}} <strong> {{#str}}activesince, mod_discourse{{/str}}:</strong> {{/activephasefour}}
                            {{^activephasefour}} <strong> {{#str}}activefrom, mod_discourse{{/str}}:</strong> {{/activephasefour}}

                            <span class="pull-right">{{#userdate}}{{deadlinephasefour}}, {{#str}} strftimedate {{/str}}{{/userdate}}</span>
                            <br><br>
                        {{/deadlinephasefour}}
                        {{#hintphasefour}}<strong> {{#str}}hint, mod_discourse{{/str}}: </strong><span class="pull-right"><p> {{#shortentext}} 210, {{hintphasefour}} {{/shortentext}}</p>{{/hintphasefour}} </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="row">
        <div class="table-responsive discourse-table-phaseone col-md-3 pl-3 pr-0">
            <table class="table table-striped table-hover generaltable generalbox {{#activephaseone}}discourse-border-success{{/activephaseone}}{{^activephaseone}}discourse-border-default{{/activephaseone}}">
                <thead>
                    <th scope="col">
                        {{#str}}phaseone, mod_discourse{{/str}}
                        <button class="btn btn-secondary discourse-btn-round pull-right" data-toggle="collapse" data-target=".collapseGroupPhaseOne" aria-expanded="false" aria-controls="collapseGroupPhaseOne" title="{{#str}} openallgroups, mod_discourse, {{#str}} phaseone, mod_discourse {{/str}} {{/str}}"><i class="fa fa-lg fa-caret-down"></i></button>
                    </th>
                </thead>
                <tbody>
                    {{#groups.phaseone}} <tr>
                        <td>
                            <div class="collapse {{#activephaseone}}show{{/activephaseone}} collapseGroupPhaseOne collapseGroup{{id}}">
                                <div class="row">
                                    <span class="col-md-10"><i class="fa fa-lg fa-group"></i> <strong><a href="/mod/discourse/groupview.php?id={{cmid}}&group={{id}}">{{name}}</a></strong></span>
                                    <span class="col-md-2"><button class="btn btn-secondary discourse-btn-round-small pull-right" data-toggle="collapse" data-target=".collapseGroup{{id}}" aria-expanded="false" aria-controls="collapseGroup{{id}}" title="{{#str}}closegroup, mod_discourse, {{name}}{{/str}}"><i class="fa fa-lg fa-caret-up"></i></button></span>
                                </div>
                                <br><br>
                                <div class="row">
                                    <span class="col-md-10"><i class="fa fa-lg fa-file-o"></i>
                                        {{#submission.id}}
                                            <strong>{{#str}}submission, mod_discourse{{/str}}: </strong>
                                            {{{submission.submission}}}
                                        {{/submission.id}}
                                        {{^submission.id}}<strong>{{#str}}nosubmission, mod_discourse{{/str}}</strong>{{/submission.id}}
                                    </span>
                                    <span class="col-md-2">
                                        {{#submission.timecreated}}<i class="fa fa-2x fa-check text-success pull-right" title="{{^submission.timemodified}}{{#str}}submittet, mod_discourse, {{#userdate}}{{submission.timecreated}}, {{#str}} strftimedate {{/str}}{{/userdate}}{{/str}}{{/submission.timemodified}}{{#submission.timemodified}}{{#str}}updated, mod_discourse, {{#userdate}}{{submission.timemodified}}, {{#str}} strftimedate {{/str}}{{/userdate}}{{/str}}{{/submission.timemodified}}"></i>{{/submission.timecreated}}
                                        {{^submission.timecreated}}<i class="fa fa-2x fa-times pull-right text-danger" title="{{#str}}nosubmission, mod_discourse{{/str}}"></i>{{/submission.timecreated}}
                                    </span>
                                </div>
                            </div>
                            <div class="collapse {{^activephaseone}}show{{/activephaseone}} collapseGroupPhaseOne collapseGroup{{id}}">
                                <div class="row">
                                    <strong class="col-md-9"><a href="/mod/discourse/groupview.php?id={{cmid}}&group={{id}}">{{name}}</a></strong>
                                    <span class="col-md-3 p-0 p-r-1">
                                        <button class="btn btn-secondary discourse-btn-round-small pull-right" data-toggle="collapse" data-target=".collapseGroup{{id}}" aria-expanded="false" aria-controls="collapseGroup{{id}}" title="{{#str}}opengroup, mod_discourse, {{name}}{{/str}}"><i class="fa fa-lg fa-caret-down"></i></button>
                                        {{#submission.id}}<i class="fa fa-2x fa-check text-success" title="{{#str}}submissionreceived, mod_discourse{{/str}}"></i>{{/submission.id}}
                                        {{^submission.id}}<i class="fa fa-2x fa-times text-danger" title="{{#str}}nosubmission, mod_discourse{{/str}}"></i>{{/submission.id}}
                                    </span>
                                </div>
                            </div>
                        </td>
                    </tr>{{/groups.phaseone}}
                </tbody>
            </table>
        </div>

        <div class="table-responsive discourse-table-phasetwo col-md-3 p-0">
            <table class="table table-striped table-hover generaltable generalbox {{#activephasetwo}}discourse-border-success{{/activephasetwo}}{{^activephasetwo}}discourse-border-default{{/activephasetwo}}">
                <thead>
                    <th scope="col">{{#str}}phasetwo, mod_discourse{{/str}}</th>
                </thead>
                <tbody>
                    {{#groups.phasetwo}} <tr>
                        <td>
                            <span>
                                {{#.}}<i class="fa fa-lg fa-group"></i> <strong><a href="/mod/discourse/groupview.php?id={{cmid}}&group={{id}}">{{name}}</a></strong>
                                <br><br>
                                <i class="fa fa-lg fa-user"></i> <strong>{{#str}}groupparticipants, mod_discourse{{/str}}:</strong>
                                <br>
                                {{#participants}} {{{profilelink}}}  <br> {{/participants}}
                                <br>
                                {{/.}}
                                <span>
                                    {{#submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}submission, mod_discourse{{/str}}: </strong><i class="fa fa-2x fa-check text-success pull-right" title="{{#str}}submissionreceived, mod_discourse{{/str}}"></i>{{{submission.submission}}} {{/submission.id}}
                                    {{^submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}nosubmission, mod_discourse{{/str}}</strong><i class="fa fa-2x fa-times pull-right text-danger" title="{{#str}}nosubmission, mod_discourse{{/str}}"></i>{{/submission.id}}
                                </span>
                            </span>
                        </td>
                    </tr>{{/groups.phasetwo}}
                </tbody>
            </table>
        </div>

        <div class="table-responsive discourse-table-phasethree col-md-3 p-0">
            <table class="table table-striped table-hover generaltable generalbox {{#activephasethree}}discourse-border-success{{/activephasethree}}{{^activephasethree}}discourse-border-default{{/activephasethree}}">
                <thead>
                    <th scope="col">{{#str}}phasethree, mod_discourse{{/str}}</th>
                </thead>
                <tbody>
                    {{#groups.phasethree}} <tr>
                        <td>
                            <span>
                                {{#.}}<i class="fa fa-lg fa-group"></i> <strong><a href="/mod/discourse/groupview.php?id={{cmid}}&group={{id}}">{{name}}</a></strong>
                                <br><br>
                                <i class="fa fa-lg fa-user"></i> <strong>{{#str}}groupparticipants, mod_discourse{{/str}}:</strong>
                                <br>
                                {{#participants}} {{{profilelink}}}  <br> {{/participants}}
                                <br>
                                {{/.}}
                                <span>
                                    {{#submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}submission, mod_discourse{{/str}}: </strong><i class="fa fa-2x fa-check text-success pull-right" title="{{#str}}submissionreceived, mod_discourse{{/str}}"></i>{{{submission.submission}}} {{/submission.id}}
                                    {{^submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}nosubmission, mod_discourse{{/str}}</strong><i class="fa fa-2x fa-times pull-right text-danger" title="{{#str}}nosubmission, mod_discourse{{/str}}"></i>{{/submission.id}}
                                </span>
                            </span>
                        </td>
                    </tr>{{/groups.phasethree}}
                </tbody>
            </table>
        </div>

        <div class="table-responsive discourse-table-phasefour col-md-3 p-0">
            <table class="table table-striped table-hover generaltable generalbox {{#activephasefour}}discourse-border-success{{/activephasefour}}{{^activephasefour}}discourse-border-default{{/activephasefour}}">
                <thead>
                    <th scope="col">{{#str}}phasefour, mod_discourse{{/str}}</th>
                </thead>
                <tbody>
                    {{#groups.phasefour}} <tr>
                        <td>
                            <span>
                                {{#.}}<i class="fa fa-lg fa-group"></i> <strong><a href="/mod/discourse/groupview.php?id={{cmid}}&group={{id}}">{{name}}</a></strong>
                                <br><br>
                                <i class="fa fa-lg fa-user"></i> <strong>{{#str}}groupparticipants, mod_discourse{{/str}}:</strong>
                                <br>
                                {{#participants}} {{{profilelink}}}  <br> {{/participants}}
                                <br>
                                {{/.}}
                                <span>
                                    {{#submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}submission, mod_discourse{{/str}}: </strong><i class="fa fa-2x fa-check text-success pull-right" title="{{#str}}submissionreceived, mod_discourse{{/str}}"></i>{{{submission.submission}}} {{/submission.id}}
                                    {{^submission.id}}<i class="fa fa-lg fa-file-o"></i>  <strong>{{#str}}nosubmission, mod_discourse{{/str}}</strong><i class="fa fa-2x fa-times pull-right text-danger" title="{{#str}}nosubmission, mod_discourse{{/str}}"></i>{{/submission.id}}
                                </span>
                            </span>
                        </td>
                    </tr>{{/groups.phasefour}}
                </tbody>
            </table>
        </div>
    </div>
</div>